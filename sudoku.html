<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cr√©er un Input Dynamique</title>
    <style>
    </style>
</head>
<body>
    <input type="text" maxlength="1" size="1" id="0">
    <input type="text" maxlength="1" size="1" id="1">
    <input type="text" maxlength="1" size="1" id="2">
    &nbsp;
    <input type="text" maxlength="1" size="1" id="3">
    <input type="text" maxlength="1" size="1" id="4">
    <input type="text" maxlength="1" size="1" id="5">
    &nbsp;
    <input type="text" maxlength="1" size="1" id="6">
    <input type="text" maxlength="1" size="1" id="7">
    <input type="text" maxlength="1" size="1" id="8">
    <br>
    <input type="text" maxlength="1" size="1" id="9">
    <input type="text" maxlength="1" size="1" id="10">
    <input type="text" maxlength="1" size="1" id="11">
    &nbsp;
    <input type="text" maxlength="1" size="1" id="12">
    <input type="text" maxlength="1" size="1" id="13">
    <input type="text" maxlength="1" size="1" id="14">
    &nbsp;
    <input type="text" maxlength="1" size="1" id="15">
    <input type="text" maxlength="1" size="1" id="16">
    <input type="text" maxlength="1" size="1" id="17">
    <br>
    <input type="text" maxlength="1" size="1" id="18">
    <input type="text" maxlength="1" size="1" id="19">
    <input type="text" maxlength="1" size="1" id="20">
    &nbsp;
    <input type="text" maxlength="1" size="1" id="21">
    <input type="text" maxlength="1" size="1" id="22">
    <input type="text" maxlength="1" size="1" id="23">
    &nbsp;
    <input type="text" maxlength="1" size="1" id="24">
    <input type="text" maxlength="1" size="1" id="25">
    <input type="text" maxlength="1" size="1" id="26">
    <br>
    <!-- deuxieme lignes de matriec 3x3 -->
    <br>     
    <input type="text" maxlength="1" size="1" id="27">
    <input type="text" maxlength="1" size="1" id="28">
    <input type="text" maxlength="1" size="1" id="29">
    &nbsp;
    <input type="text" maxlength="1" size="1" id="30">
    <input type="text" maxlength="1" size="1" id="31">
    <input type="text" maxlength="1" size="1" id="32">
    &nbsp;
    <input type="text" maxlength="1" size="1" id="33">
    <input type="text" maxlength="1" size="1" id="34">
    <input type="text" maxlength="1" size="1" id="35">
    <br>
    <input type="text" maxlength="1" size="1" id="36">
    <input type="text" maxlength="1" size="1" id="37">
    <input type="text" maxlength="1" size="1" id="38">
    &nbsp;
    <input type="text" maxlength="1" size="1" id="39">
    <input type="text" maxlength="1" size="1" id="40">
    <input type="text" maxlength="1" size="1" id="41">
    &nbsp;
    <input type="text" maxlength="1" size="1" id="42">
    <input type="text" maxlength="1" size="1" id="43">
    <input type="text" maxlength="1" size="1" id="44">
    &nbsp
    <button id="go" onclick="go()"> Go! </button> <br>
    <input type="text" maxlength="1" size="1" id="45">
    <input type="text" maxlength="1" size="1" id="46">
    <input type="text" maxlength="1" size="1" id="47">
    &nbsp;
    <input type="text" maxlength="1" size="1" id="48">
    <input type="text" maxlength="1" size="1" id="49">
    <input type="text" maxlength="1" size="1" id="50">
    &nbsp;
    <input type="text" maxlength="1" size="1" id="51">
    <input type="text" maxlength="1" size="1" id="52">
    <input type="text" maxlength="1" size="1" id="53">
    <br>
    <br>
    <input type="text" maxlength="1" size="1" id="54">
    <input type="text" maxlength="1" size="1" id="55">
    <input type="text" maxlength="1" size="1" id="56">
    &nbsp;
    <input type="text" maxlength="1" size="1" id="57">
    <input type="text" maxlength="1" size="1" id="58">
    <input type="text" maxlength="1" size="1" id="59">
    &nbsp;
    <input type="text" maxlength="1" size="1" id="60">
    <input type="text" maxlength="1" size="1" id="61">
    <input type="text" maxlength="1" size="1" id="62">
    <br>
    <input type="text" maxlength="1" size="1" id="63">
    <input type="text" maxlength="1" size="1" id="64">
    <input type="text" maxlength="1" size="1" id="65">
    &nbsp;
    <input type="text" maxlength="1" size="1" id="66">
    <input type="text" maxlength="1" size="1" id="67">
    <input type="text" maxlength="1" size="1" id="68">
    &nbsp;
    <input type="text" maxlength="1" size="1" id="69">
    <input type="text" maxlength="1" size="1" id="70">
    <input type="text" maxlength="1" size="1" id="71">
    <br>
    <input type="text" maxlength="1" size="1" id="72">
    <input type="text" maxlength="1" size="1" id="73">
    <input type="text" maxlength="1" size="1" id="74">
    &nbsp;
    <input type="text" maxlength="1" size="1" id="75">
    <input type="text" maxlength="1" size="1" id="76">
    <input type="text" maxlength="1" size="1" id="77">
    &nbsp;
    <input type="text" maxlength="1" size="1" id="78">
    <input type="text" maxlength="1" size="1" id="79">
    <input type="text" maxlength="1" size="1" id="80">
    <br>

    <script>
      const LLL = []
      for (let i=0;i<81;i++) {
	  id = i.toString()
	  LLL.push(document.getElementById(id))
      }
      for (let i=0;i<81;i++) {
	  LLL[i].value=""//i.toString()
      }
      for (let i=0;i<81;i++) {
	  LLL[i].addEventListener('input',myFun)
      }
      consoleLLL()
      // cases des 9 lignes et 9 colonnes
      Ls=[[],[],[],[],[],[],[],[],[]]
      Cs=[[],[],[],[],[],[],[],[],[]]
      for (let l=0;l<9;l++) {
	  for (let c=0;c<9;c++) {
	      k = 9*l+c
	      Ls[l].push(k)
	      x = ~~(k/9)
	      y = k%9
	      Cs[l].push(x+y*9)
	  }
      }
      // cases des 9 squares
      Ss=[[],[],[],[],[],[],[],[],[]]
      for(let ix=0;ix<3;ix++) {
	  for(let iy=0;iy<3;iy++) {
	      k = ix*3+iy // index du square
	      // square (ix,iy)
	      x = ix*3 // coord du coin haut gauche
	      y = iy*3 // coord du coin haut gauche
	      for (let i=0;i<3;i++) {
		  for (let j=0;j<3;j++) {
		      a=x+i
		      b=y+j
		      Ss[k].push(a+b*9)
		  }
	      }
	  }
      }
      memberOfLCS = [] // memberOfLCS[k]=[l,c,s] means cell k belongs to Ls[l],Cs|c],Ss[s]
      for (let k=0;k<81;k++) {
	  for (let i=0;i<9;i++) {
	      if (Ls[i].includes(k))
		  l=i
	      if (Cs[i].includes(k))
		  c=i
	      if (Ss[i].includes(k))
		  s=i
	  }
	  memberOfLCS.push([l,c,s])
      } 

      // **********************************************************************
      //                            FUNCTION DEFINITIONS
      // **********************************************************************
      function v(k){ // return the value in the cell k, ie 0 if invalide
	  c = LLL[k].value
	  val = Number(c)
	  if (isNaN(val))
	      return 0
	  if (val>=10)
	      return 0
	  return val
      } // FIN  function v(k){

      function consoleLLL() { // out on console the values
	  console.log(LLL.map((Cell)  => Cell.value))
      } // FIN function consoleLLL()
	      
      function valuesIn(cases) { // return false if there is a repetition in the list of the cases
	  ans = []
	  for (let k=0;k<9;k++) {
	      x = v(cases[k])
	      if (x!=0)
		  ans.push(x)
	  }
	  return ans
      } // FIN function valueIn(cases)
      
      function analyse() {
	  // first test : coherence
	  for (let k=0;k<9;k++) {
	      a = valuesIn(Ls[k])
	      b = new Set(a)
	      if (a.length != b.size) {
		  alert(`line ${k+1} has doublons`)
		  return
	      }
	      a = valuesIn(Cs[k])
	      b = new Set(a)
	      if (a.length != b.size) {
		  alert(`column ${k+1} has doublons`)
		  return
	      }
	      a = valuesIn(Ss[k])
	      b = new Set(a)
	      if (a.length != b.size) {
		  alert(`Square ${k+1} has doublons`)
		  return
	      }
	  }
      } // FIN function analyse()

      function outTab() {
      } // FIN function outTab()
	      
      function myFun(event) { // This function is called each time an entry has been changed
	  //console.log("Valeur actuelle : ", event.target.value);
	  let c = event.target.value
	  if (isNaN(Number(c))) {
	      event.target.value = ""
	  } else {
	      event.target.value = c=="0" ? "" : c
	  }
      } // FIN
      
      function go() {
	  consoleLLL()
      } // FIN
      
      function example2LLL(example) { // example est une chaine avec des blancs et de \n qui ne seront pas considere
	  data = example.replace(/\s/g,'')
	  if (data.length!=81) {
	      alert("example2LLL : invalid argument")
	      return
	  }
	  for (let i=0;i<81;i++) {
	      c = data[i]
	      v = (isNaN(Number(c))) ? "" : c
	      if (v<=0 || v>=10)
		  v = ""
	      LLL[i].value = v
	  }
      } // FIN
      
      function f() {
	  example2LLL(example1)
      } // FIN
      
       example1=
     `830 007 240
      640 020 509
      700 009 000  

      000 053 608
      900 201 007
      405 970 000

      000 700 005
      506 030 005
      098 199 034`

   </script>

</body>
</html>
